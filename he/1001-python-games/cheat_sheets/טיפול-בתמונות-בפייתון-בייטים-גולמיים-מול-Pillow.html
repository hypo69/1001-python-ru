<h2 dir="rtl">קריאת תמונות: בייטים גולמיים מול <span dir="ltr">Pillow</span></h2>
<p dir="rtl">כשמדובר בעבודה עם תמונות בפייתון, יש לך שתי גישות עיקריות:</p>
<ol>
<li dir="rtl"><strong>קריאת בייטים גולמיים:</strong> שימוש ב-<code dir="ltr">open()</code> לקריאת תוכן קובץ תמונה כרצף של בייטים.</li>
<li dir="rtl"><strong>שימוש ב-<span dir="ltr">Pillow</span>:</strong> שימוש בספריית <span dir="ltr">Pillow</span> לפתיחה ועיבוד תמונות.</li>
</ol>
<p dir="rtl">נבחן כל גישה בפירוט ונברר מהם ההבדלים ביניהן ומתי עדיף להשתמש בכל גישה.</p>
<h3 dir="rtl">1. קריאת בייטים גולמיים באמצעות <code dir="ltr">open()</code></h3>
<h4 dir="rtl">מה זה?</h4>
<p dir="rtl">כאשר אתה פותח קובץ תמונה במצב בינארי (<code dir="ltr">"rb"</code>) באמצעות <code dir="ltr">open()</code>, אתה מקבל גישה לתוכן הקובץ כרצף של בייטים. זה אומר שאתה מקבל נתונים "גולמיים", ללא כל פרשנות או עיבוד.</p>
<h4 dir="rtl">איך זה נראה בקוד?</h4>
<pre class="line-numbers"><code class="language-python">from pathlib import Path

def read_image_bytes_direct(image_path: Path) -> bytes | None:
    """
    קורא תמונה כבייטים ישירות באמצעות open().

    Args:
        image_path: נתיב לקובץ התמונה.

    Returns:
        bytes: בייטים של התמונה.
        None: אם אירעה שגיאה.
    """
    try:
        with open(image_path, "rb") as image_file:
            image_data = image_file.read()
            return image_data
    except Exception as e:
        print(f"שגיאת קריאת קובץ: {e}")
        return None


if __name__ == '__main__':
    image_path = Path("test.jpg")  # החלף בנתיב לתמונה שלך

    if not image_path.is_file():
        print(f"הקובץ {image_path} אינו קיים")
    else:
       image_bytes_direct = read_image_bytes_direct(image_path)

       if image_bytes_direct:
           print(f"התמונה נקראה ישירות, גודל: {len(image_bytes_direct)} בייטים")
           # ניתן להשתמש ב-image_bytes_direct, לדוגמה, לשליחה ברשת
       else:
           print("לא ניתן לקרוא את התמונה.")
</code></pre>
<h4 dir="rtl">מתי זה שימושי?</h4>
<ul>
<li dir="rtl"><strong>העברת נתונים ברשת:</strong> כאשר אתה צריך פשוט להעביר נתוני תמונה ברשת, מבלי לדאוג לפורמט.</li>
<li dir="rtl"><strong>שמירה לדיסק:</strong> כאשר אתה צריך לשמור את תוכן הקובץ לדיסק ללא שינויים.</li>
<li dir="rtl"><strong>גישה ברמה נמוכה:</strong> כאשר אתה צריך גישה ברמה נמוכה לנתוני הקובץ, ואתה יודע בעצמך כיצד לפרש אותם.</li>
</ul>
<h4 dir="rtl">מגבלות</h4>
<ul>
<li dir="rtl"><strong>אין עיבוד פורמט:</strong> אתה מקבל רק בייטים, ללא כל מידע על פורמט התמונה (<span dir="ltr">JPEG, PNG, GIF</span> וכו').</li>
<li dir="rtl"><strong>אין אימות:</strong> אין בדיקה אם הקובץ הוא אכן תמונה.</li>
<li dir="rtl"><strong>אין מטא-נתונים:</strong> אינך מקבל גישה למטא-נתונים של התמונה (גודל, מרחב צבע וכו').</li>
<li dir="rtl"><strong>אין המרות נוחות:</strong> לא ניתן לשנות גודל, פורמט או להחיל המרות אחרות ללא עיבוד נוסף.</li>
</ul>
<h3 dir="rtl">2. שימוש ב-<span dir="ltr">Pillow</span> לקריאת תמונות</h3>
<h4 dir="rtl">מה זה?</h4>
<p dir="rtl"><span dir="ltr">Pillow</span> היא ספרייה חזקה לעבודה עם תמונות. היא מאפשרת לפתוח תמונות בפורמטים שונים, לקבל מטא-נתונים, לשנות גודל, להמיר פורמטים ועוד הרבה יותר.</p>
<h4 dir="rtl">איך זה נראה בקוד?</h4>
<pre class="line-numbers"><code class="language-python">from pathlib import Path
from PIL import Image
from io import BytesIO

def read_image_pillow(image_path: Path) -> bytes | None:
    """
    קורא תמונה באמצעות Pillow ומחזיר אותה כבייטים JPEG.

    Args:
        image_path: נתיב לקובץ התמונה.

    Returns:
         bytes: בייטים של התמונה בפורמט JPEG.
         None: אם אירעה שגיאה.
    """
    try:
        img = Image.open(image_path)
        img_byte_arr = BytesIO()
        img.save(img_byte_arr, format="JPEG")
        return img_byte_arr.getvalue()
    except Exception as e:
        print(f"שגיאת קריאת תמונה עם Pillow: {e}")
        return None

if __name__ == '__main__':
    image_path = Path("test.jpg") # החלף בנתיב לתמונה שלך

    if not image_path.is_file():
        print(f"הקובץ {image_path} אינו קיים")
    else:
        image_bytes_pillow = read_image_pillow(image_path)
        if image_bytes_pillow:
           print(f"התמונה נקראה עם Pillow, גודל: {len(image_bytes_pillow)} בייטים")
           # ניתן להשתמש ב-image_bytes_pillow, לדוגמה, לשליחה למודל Gemini.
        else:
           print("לא ניתן לקרוא את התמונה עם Pillow.")
</code></pre>
<h4 dir="rtl">מתי זה שימושי?</h4>
<ul>
<li dir="rtl"><strong>עבודה עם תמונות:</strong> כאשר אתה צריך לעבוד עם תמונות, ולא רק עם בייטים.</li>
<li dir="rtl"><strong>זיהוי פורמט אוטומטי:</strong> <span dir="ltr">Pillow</span> מזהה אוטומטית את פורמט התמונה.</li>
<li dir="rtl"><strong>המרת פורמטים:</strong> ניתן להמיר תמונות בקלות בין פורמטים שונים (<span dir="ltr">JPEG, PNG, GIF</span> וכו').</li>
<li dir="rtl"><strong>שינוי גודל:</strong> ניתן לשנות את גודל התמונה לפני העיבוד.</li>
<li dir="rtl"><strong>מטא-נתונים:</strong> ניתן לגשת למטא-נתונים של התמונה (גודל, פרופיל צבע וכו').</li>
<li dir="rtl"><strong>טיפול בשגיאות:</strong> <span dir="ltr">Pillow</span> מטפלת בשגיאות בעת פתיחת קבצים פגומים.</li>
</ul>
<h4 dir="rtl">יתרונות</h4>
<ul>
<li dir="rtl"><strong>גמישות:</strong> <span dir="ltr">Pillow</span> מספקת אפשרויות רבות לעבודה עם תמונות.</li>
<li dir="rtl"><strong>אמינות:</strong> <span dir="ltr">Pillow</span> בודקת אם הקובץ הוא תמונה חוקית.</li>
<li dir="rtl"><strong>נוחות:</strong> <span dir="ltr">Pillow</span> מפשטת את תהליך עיבוד התמונות.</li>
</ul>
<h3 dir="rtl">השוואה בטבלה</h3>
<table>
<thead>
<tr>
<th dir="rtl">מאפיין</th>
<th dir="rtl"><code dir="ltr">open(image_path, "rb")</code></th>
<th dir="rtl"><span dir="ltr">Pillow</span></th>
</tr>
</thead>
<tbody>
<tr>
<td dir="rtl"><strong>מה עושה</strong></td>
<td dir="rtl">קורא קובץ כרצף של בייטים</td>
<td dir="rtl">פותח ומעבד תמונה</td>
</tr>
<tr>
<td dir="rtl"><strong>פורמט</strong></td>
<td dir="rtl">לא מזהה פורמט</td>
<td dir="rtl">מזהה פורמט אוטומטית</td>
</tr>
<tr>
<td dir="rtl"><strong>מטא-נתונים</strong></td>
<td dir="rtl">אין גישה למטא-נתונים</td>
<td dir="rtl">מספק גישה למטא-נתונים</td>
</tr>
<tr>
<td dir="rtl"><strong>עיבוד</strong></td>
<td dir="rtl">אין יכולות עיבוד</td>
<td dir="rtl">שינוי גודל, המרת פורמטים, וכו'</td>
</tr>
<tr>
<td dir="rtl"><strong>אימות</strong></td>
<td dir="rtl">אין אימות</td>
<td dir="rtl">בודק אם הקובץ הוא תמונה חוקית</td>
</tr>
<tr>
<td dir="rtl"><strong>מתי להשתמש</strong></td>
<td dir="rtl">העברת בייטים פשוטה, גישה ברמה נמוכה</td>
<td dir="rtl">עבודה עם תמונות, המרות, טיפול בשגיאות</td>
</tr>
<tr>
<td dir="rtl"><strong>דוגמה</strong></td>
<td dir="rtl">העברת בייטים ברשת, שמירה לדיסק</td>
<td dir="rtl">הכנת תמונות עבור <span dir="ltr">Gemini</span>, פיתוח ווב</td>
</tr>
</tbody>
</table>
<h3 dir="rtl">בהקשר של <span dir="ltr">Gemini</span></h3>
<p dir="rtl">מודלי <span dir="ltr">Gemini</span> מצפים לנתוני תמונה בפורמט ספציפי (בדרך כלל <span dir="ltr">JPEG</span> או <span dir="ltr">PNG</span>). שימוש ב-<span dir="ltr">Pillow</span> מבטיח שאתה מספק תמונות בפורמט הנכון, ולא רק בייטים "גולמיים". יתר על כן, <span dir="ltr">Pillow</span> מאפשרת לשנות את גודל התמונה במידת הצורך.</p>
<h3 dir="rtl">דיאגרמת השוואה</h3>
<pre class="line-numbers"><code class="language-mermaid">graph TD
    A[התחלה: בקשת קריאת תמונה] --> B{"open(image_path)"};
    B --> C[קבלת בייטים גולמיים];
    C --> D[סיום: בייטים התקבלו];

    A --> E{"Image.open(image_path) עם Pillow"};
    E --> F{זיהוי פורמט אוטומטי};
    F --> G{"המרות (אופציונלי)"};
    G --> H[קבלת בייטים בפורמט הרצוי];
    H --> I[סיום: בייטים התקבלו];

    
    
    style A fill:#D46A6A,stroke:#333,stroke-width:2px
    style B fill:#D46A6A,stroke:#333,stroke-width:2px
    style C fill:#D46A6A,stroke:#333,stroke-width:2px
    style D fill:#D46A6A,stroke:#333,stroke-width:2px
    style E fill:#D46A6A,stroke:#333,stroke-width:2px
    style F fill:#D46A6A,stroke:#333,stroke-width:2px
    style G fill:#D46A6A,stroke:#333,stroke-width:2px
    style H fill:#D46A6A,stroke:#333,stroke-width:2px
    style I fill:#D46A6A,stroke:#333,stroke-width:2px
    
    linkStyle 0,1,2,3,4 stroke:#333,stroke-width:2px
</code></pre>
<p dir="rtl">אם אתה צריך פשוט לקרוא קובץ כבייטים, ללא כל עיבוד, <code dir="ltr">open(image_path, "rb")</code> יעבוד. עם זאת, לעיבוד תמונות, במיוחד לאינטראקציה עם ממשקי <code dir="ltr">API</code> המצפים לתמונות בפורמט ספציפי, שימוש ב-<span dir="ltr">Pillow</span> הוא פתרון אמין וגמיש יותר.</p>