<h1 dir="rtl">אימון מודל <span dir="ltr">OpenAI</span> לסיווג דפי אינטרנט</h1>
<h2 dir="rtl">מבוא</h2>
<p dir="rtl">אימון מודל <span dir="ltr">OpenAI</span> לקבוע אם דף הוא חנות מקוונת.</p>
<ul dir="rtl">
<li>הכנת נתונים,</li>
<li>טוקניזציה של טקסט,</li>
<li>שליחת נתונים לאימון</li>
<li>בדיקת מודל.</li>
</ul>
<h2 dir="rtl">שלב 1: הרשמה והגדרת <span dir="ltr">OpenAI API</span></h2>
<p dir="rtl">כדי להתחיל לעבוד עם <span dir="ltr">OpenAI API</span>, עליך להירשם לפלטפורמת <span dir="ltr">OpenAI</span> ולקבל מפתח <span dir="ltr">API</span>. מפתח זה ישמש לאימות בעת קריאה לשיטות <span dir="ltr">API</span>.</p>
<pre class="line-numbers"><code class="language-python">import openai

# הגדרת מפתח API
openai.api_key = 'your-api-key'
</code></pre>
<h2 dir="rtl">שלב 2: הכנת נתונים</h2>
<p dir="rtl">כדי לאמן את המודל, עליך להכין סט נתונים שיכיל דוגמאות של דפי אינטרנט,<br>
גם חנויות וגם לא חנויות.<br>
כל רשומה צריכה לכלול את טקסט הדף ותווית מתאימה (<span dir="ltr"><code>positive</code></span> לחנויות ו-<span dir="ltr"><code>negative</code></span> ללא חנויות).</p>
<p dir="rtl">דוגמת קובץ <span dir="ltr">JSON</span>:</p>
<pre class="line-numbers"><code class="language-json">[
    {
        "text": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;ברוכים הבאים לחנות המקוונת שלנו&lt;/h1&gt;&lt;p&gt;אנו מציעים מגוון רחב של מוצרים במחירים תחרותיים. בקרו בחנות שלנו היום!&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;",
        "label": "positive"
    },
    {
        "text": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;אודותינו&lt;/h1&gt;&lt;p&gt;אנו ספק מוביל של שירותים איכותיים. צרו קשר לקבלת מידע נוסף.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;",
        "label": "negative"
    }
]
</code></pre>
<h2 dir="rtl">שלב 3: טוקניזציה של טקסט</h2>
<p dir="rtl">לפני שליחת נתונים למודל <span dir="ltr">OpenAI</span>, יש לטוקן את הטקסט.<br>
טוקניזציה היא תהליך פירוק טקסט למילים או טוקנים בודדים.<br>
בפייתון ניתן להשתמש בספריות כמו <span dir="ltr">NLTK</span>, <span dir="ltr">spaCy</span> או <span dir="ltr">tokenizers</span> מספריית <span dir="ltr">transformers</span>.</p>
<p dir="rtl">דוגמת טוקניזציה באמצעות <span dir="ltr">NLTK</span>:</p>
<pre class="line-numbers"><code class="language-python">import nltk
from nltk.tokenize import word_tokenize

# דוגמת טקסט
text = "זוהי דוגמת טקסט לטוקניזציה."

# טוקניזציה של טקסט
tokens = word_tokenize(text)
tokenized_text = ' '.join(tokens)
print(tokenized_text)
</code></pre>
<h2 dir="rtl">שלב 4: שליחת נתונים לאימון</h2>
<p dir="rtl">לאחר טוקניזציה של הטקסט, ניתן לשלוח את הנתונים לאימון מודל <span dir="ltr">OpenAI</span>.<br>
הנה דוגמת קוד לשליחת נתונים:</p>
<pre class="line-numbers"><code class="language-python">import openai

def train_model(data, positive=True):
    try:
        response = openai.Train.create(
            model="text-davinci-003",
            documents=[entry["text"] for entry in data],
            labels=["positive" if positive else "negative"] * len(data),
            show_progress=True
        )
        return response.id
    except Exception as ex:
        print("אירעה שגיאה במהלך האימון:", ex)
        return None

# דוגמת שימוש
data = [
    {"text": "טקסט של דף האינטרנט הראשון...", "label": "positive"},
    {"text": "טקסט של דף האינטרנט השני...", "label": "negative"}
]

job_id = train_model(data, positive=True)
print("מזהה משימה:", job_id)
</code></pre>
<h2 dir="rtl">שלב 5: בדיקת מודל</h2>
<p dir="rtl">לאחר אימון המודל, יש לבדוק אותו על סט נתוני בדיקה.<br>
הנה דוגמת קוד לבדיקה:</p>
<pre class="line-numbers"><code class="language-python">def test_model(test_data):
    try:
        predictions = []
        for entry in test_data:
            response = openai.Completion.create(
                model="text-davinci-003",
                prompt=entry["text"],
                max_tokens=1
            )
            prediction = response.choices[0].text.strip()
            predictions.append(prediction)
        return predictions
    except Exception as ex:
        print("אירעה שגיאה במהלך הבדיקה:", ex)
        return None

# דוגמת שימוש
test_data = [
    {"text": "טקסט של דף האינטרנט לבדיקה...", "label": "positive"},
    {"text": "טקסט של דף בדיקה אחר...", "label": "negative"}
]

predictions = test_model(test_data)
print("חיזויים:", predictions)
</code></pre>
<h2 dir="rtl">שלב 6: טיפול בשגיאות ושיפור מודל</h2>
<p dir="rtl">אם המודל נותן חיזויים שגויים, ניתן לשפר אותו על ידי<br>
הוספת נתונים נוספים או שינוי פרמטרי אימון. ניתן גם להשתמש במשוב לניתוח שגיאות.</p>
<p dir="rtl">דוגמת טיפול בשגיאות:</p>
<pre class="line-numbers"><code class="language-python">def handle_errors(predictions, test_data):
    for pred, entry in zip(predictions, test_data):
        if pred != entry["label"]:
            print(f"חיזוי שגוי עבור דף '{entry['name']}': חזוי {pred}, בפועל {entry['label']}")

# דוגמת שימוש
handle_errors(predictions, test_data)
</code></pre>