<p dir="rtl">ğŸš€ <strong>CI/CD: ××™×¡×•×“×•×ª ×•×¢×“ Production ×‘-GCP ×¢× GitHub Actions â€“ ××“×¨×™×š ××œ× ×¢× ×“×•×’×××•×ª</strong> ğŸš€</p>
<p dir="rtl">×©×œ×•×, ××¤×ª×—×™×! ×‘××××¨ ×–×” ××“×‘×¨ ×¢×œ CI/CD â€“ ×§×•× ×¡×¤×˜.</p>
<h3 dir="rtl">××”×• ×¦×™× ×•×¨ CI/CD ×‘×”×§×©×¨ ×©×œ ×ª×›× ×•×ª?</h3>
<p dir="rtl"><strong>×¦×™× ×•×¨ CI/CD (××™× ×˜×’×¨×¦×™×” ×¨×¦×™×¤×” / ××¡×¤×§×” ×¨×¦×™×¤×” ××• ×¤×¨×™×¡×” ×¨×¦×™×¤×”)</strong> ×”×•× ×ª×”×œ×™×š ××•×˜×•××˜×™ ×”×××¤×©×¨ ×œ××¤×ª×—×™× ×œ×¡×¤×§ ×©×™× ×•×™×™× ×‘×§×•×“ ×‘××”×™×¨×•×ª ×•×‘×××™× ×•×ª ×œ×¡×‘×™×‘×ª ×™×™×¦×•×¨.</p>
<p dir="rtl">×‘×•××• × ×¤×¨×§ ××ª ××•×©×’×™ ×”××¤×ª×—:</p>
<p dir="rtl">ğŸ”§ <strong>CI â€” ××™× ×˜×’×¨×¦×™×” ×¨×¦×™×¤×”</strong><br>
×–×•×”×™ ×¤×¨×§×˜×™×§×” ×©×‘×” ××¤×ª×—×™× ××©×œ×‘×™× ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×©×™× ×•×™×™× ×‘×‘×¡×™×¡ ×§×•×“ ××©×•×ª×£. ×›×œ ×©×™× ×•×™ ×›×–×” ×‘××•×¤×Ÿ ××•×˜×•××˜×™:
</p>
<ul dir="rtl">
<li><strong>× ×‘× ×”</strong> (<span dir="ltr">build</span>)</li>
<li><strong>× ×‘×“×§</strong> (×‘×“×™×§×•×ª ×™×—×™×“×”, ×‘×“×™×§×•×ª ××™× ×˜×’×¨×¦×™×”)</li>
<li><strong>× ×‘×“×§ ×œ×”×ª×××” ×œ×ª×§× ×™×</strong> (×œ×™× ×˜×™× ×’, × ×™×ª×•×— ×¡×˜×˜×™)</li>
</ul>
<p dir="rtl">ğŸ‘‰ <strong>××˜×¨×ª CI:</strong> ×œ×–×”×•×ª ×©×’×™××•×ª ×‘×©×œ×‘ ××•×§×“× ×›×›×œ ×”××¤×©×¨, ×œ×¤× ×™ ×©×”×Ÿ ×©×•×‘×¨×•×ª ××©×”×• ×—×©×•×‘ ××• ××’×™×¢×•×ª ×œ×’×¨×¡×”.</p>
<p dir="rtl">ğŸš€ <strong>CD â€” ××¡×¤×§×” ×¨×¦×™×¤×” ××• ×¤×¨×™×¡×” ×¨×¦×™×¤×”</strong><br>
×™×© ×›××Ÿ ×©×ª×™ ××¤×©×¨×•×™×•×ª:
</p>
<p dir="rtl">âœ… <strong>××¡×¤×§×” ×¨×¦×™×¤×”</strong><br>
×œ××—×¨ ××¢×‘×¨ ××•×¦×œ×— ×©×œ ×©×œ×‘ ×”-<span dir="ltr">CI</span>, ×”×©×™× ×•×™×™× ×‘××•×¤×Ÿ ××•×˜×•××˜×™:
</p>
<ul dir="rtl">
<li>×¢×•×‘×¨×™× ×‘×“×™×§×•×ª × ×•×¡×¤×•×ª (×œ×“×•×’××”, ×‘×“×™×§×•×ª <span dir="ltr">E2E</span> â€“ ××§×¦×” ×œ×§×¦×”)</li>
<li>× ×¤×¨×¡×™× ×œ×©×¨×ª <span dir="ltr">staging</span> (×‘×“×™×§×”)</li>
</ul>
<p dir="rtl">ğŸ‘‰ <strong>××š ×¤×¨×™×¡×” ×œ×™×™×¦×•×¨ ×¢×“×™×™×Ÿ ×“×•×¨×©×ª ××™×©×•×¨ ×™×“× ×™.</strong> ×–×” × ×•×ª×Ÿ ×œ×¦×•×•×ª ×©×œ×™×˜×” ×¢×œ <em>××ª×™</em> ×‘×“×™×•×§ ×”××©×ª××©×™× ×™×¨××• ××ª ×”×©×™× ×•×™×™×.</p>
<p dir="rtl">ğŸ¤– <strong>×¤×¨×™×¡×” ×¨×¦×™×¤×”</strong><br>
×–×”×• ×”×©×œ×‘ ×”×‘× ×œ××—×¨ ××¡×¤×§×” ×¨×¦×™×¤×”. ×›××Ÿ, ×”×¤×¨×™×¡×” ×œ×™×™×¦×•×¨ ××ª×¨×—×©×ª <strong>×‘××•×¤×Ÿ ××•×˜×•××˜×™ ×œ×—×œ×•×˜×™×Ÿ</strong>, ×× ×›×œ ×©×œ×‘×™ ×”×¦×™× ×•×¨ ×”×§×•×“××™× (×‘× ×™×™×”, ×›×œ ×”×‘×“×™×§×•×ª) ×¢×‘×¨×• ×‘×”×¦×œ×—×”. ×–×•×”×™ ×”×¨××” ×”××ª×§×“××ª ×‘×™×•×ª×¨ ×©×œ ××•×˜×•××¦×™×”.</p>
<h3 dir="rtl">ğŸ”„ ×××” ××•×¨×›×‘ ×‘×“×¨×š ×›×œ×œ ×¦×™× ×•×¨ CI/CD?</h3>
<p dir="rtl">×¦×™× ×•×¨ ×˜×™×¤×•×¡×™ ×›×•×œ×œ ××ª ×”×©×œ×‘×™× ×”×‘××™×:</p>
<ol dir="rtl">
<li><strong><span dir="ltr">Checkout</span></strong> â€” ×©×™×‘×•×˜ ×”×’×¨×¡×” ×”××—×¨×•× ×” ×©×œ ×”×§×•×“ ××”×××’×¨.</li>
<li><strong><span dir="ltr">Build</span></strong> â€” ×‘× ×™×™×ª ×”×¤×¨×•×™×§×˜ (×§×•××¤×™×œ×¦×™×”, ×”×¨×›×‘×ª ××¨×˜×™×¤×§×˜×™×, ×ª××•× ×•×ª <span dir="ltr">Docker</span>).</li>
<li><strong><span dir="ltr">Test</span></strong> â€” ×”×¤×¢×œ×ª ×¡×•×’×™× ×©×•× ×™× ×©×œ ×‘×“×™×§×•×ª (×™×—×™×“×”, ××™× ×˜×’×¨×¦×™×”, <span dir="ltr">E2E</span>).</li>
<li><strong><span dir="ltr">Lint/Code Quality</span></strong> â€” ×‘×“×™×§×ª ×”×§×•×“ ×œ×”×ª×××” ×œ×¡×’× ×•×Ÿ ×•×©×’×™××•×ª ×¤×•×˜× ×¦×™××œ×™×•×ª ×‘×××¦×¢×•×ª ×× ×ª×—×™× ×¡×˜×˜×™×™×.</li>
<li><strong><span dir="ltr">Deploy</span></strong> â€” ×¤×¨×™×¡×ª ×”×™×™×©×•× (×œ×©×¨×ª <span dir="ltr">staging</span> ××• <span dir="ltr">production</span>).</li>
<li><strong><span dir="ltr">Notify</span></strong> â€” ×©×œ×™×—×ª ×”×ª×¨××•×ª ×¢×œ ××¦×‘ ×”×¦×™× ×•×¨ ×œ×¦×•×•×ª (×œ×“×•×’××”, ×‘-<span dir="ltr">Slack</span>, ×“×•×"×œ).</li>
</ol>
<h3 dir="rtl">ğŸ›  ×›×œ×™ CI/CD ×¤×•×¤×•×œ×¨×™×™×:</h3>
<ul dir="rtl">
<li><strong><span dir="ltr">GitHub Actions</span></strong> (×”××•×§×“ ×©×œ× ×• ×”×™×•×!)</li>
<li><span dir="ltr">GitLab CI/CD</span></li>
<li><span dir="ltr">Jenkins</span></li>
<li><span dir="ltr">CircleCI</span></li>
<li><span dir="ltr">Bitbucket Pipelines</span></li>
<li><span dir="ltr">Azure DevOps</span></li>
<li><span dir="ltr">TeamCity</span></li>
</ul>
<h3 dir="rtl">ğŸ§  ×œ××” ×‘×›×œ×œ ×¦×¨×™×š CI/CD?</h3>
<ul dir="rtl">
<li><strong>××¤×—×™×ª ×˜×¢×•×™×•×ª ×× ×•×©:</strong> ××•×˜×•××¦×™×” ××‘×˜×œ×ª ×©×’×™××•×ª ×”×§×©×•×¨×•×ª ×œ×¤×¢×•×œ×•×ª ×™×“× ×™×•×ª.</li>
<li><strong>×–×™×”×•×™ ××”×™×¨ ×©×œ ×‘××’×™×:</strong> ×©×’×™××•×ª × ××¦××•×ª ××•×§×“× ×™×•×ª×¨, ××” ×©×”×•×¤×š ××•×ª×Ÿ ×œ×§×œ×•×ª ×•×–×•×œ×•×ª ×™×•×ª×¨ ×œ×ª×™×§×•×Ÿ.</li>
<li><strong>××•×˜×•××¦×™×” ×©×œ ××©×™××•×ª ×©×’×¨×ª×™×•×ª:</strong> ××¤×ª×—×™× ××‘×œ×™× ×¤×—×•×ª ×–××Ÿ ×‘×‘× ×™×™×” ×•×¤×¨×™×¡×”, ×•×™×•×ª×¨ ×–××Ÿ ×‘×§×™×“×•×“.</li>
<li><strong>×©×™×¤×•×¨ ××™×›×•×ª ×”×§×•×“:</strong> ×‘×“×™×§×•×ª ×•×‘×“×™×§×•×ª ×¨×¦×™×¤×•×ª ××¢×œ×•×ª ××ª ×¨×£ ×”××™×›×•×ª ×”×›×•×œ×œ.</li>
<li><strong>××¡×¤×§×” ××”×™×¨×” ×©×œ ×ª×›×•× ×•×ª ×œ××©×ª××©×™×:</strong> ×ª×›×•× ×•×ª ×—×“×©×•×ª ××’×™×¢×•×ª ×œ××©×ª××© ×”×§×¦×” ××”×¨ ×™×•×ª×¨ ×•×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×™×•×ª×¨.</li>
</ul>
<h3 dir="rtl">ğŸ“¦ ×“×•×’×××•×ª ×¤×©×•×˜×•×ª ×œ-CI/CD ×¢× GitHub Actions</h3>
<p dir="rtl">×‘×•××• × ×¡×ª×›×œ ×¢×œ ×¦×™× ×•×¨×•×ª ×‘×¡×™×¡×™×™× ×œ×˜×›× ×•×œ×•×’×™×•×ª ×¤×•×¤×•×œ×¨×™×•×ª. ×›×œ ×”×“×•×’×××•×ª ××©×ª××©×•×ª ×‘-<span dir="ltr">GitHub Actions</span> ×•× ×©××¨×•×ª ×‘×¡×¤×¨×™×™×ª <span dir="ltr">.github/workflows/</span> ×©×œ ×”×¤×¨×•×™×§×˜ ×©×œ×›×.</p>
<h4 dir="rtl">ğŸ CI/CD ×¢×‘×•×¨ Python (×¢× <span dir="ltr">pytest</span> ×•-<span dir="ltr">flake8</span>)</h4>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/python-ci.yml
name: Python CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11' # ×¦×™×™×Ÿ ××ª ×”×’×¨×¡×” ×©×œ×š

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt # ×•×“× ×©×™×© ×œ×š requirements.txt
          pip install flake8 pytest

      - name: Lint with flake8
        run: |
          # ×‘×“×•×§ ×§×•×“ ×‘×ª×™×§×™×•×ª src ×•-tests (×”×ª×× ×œ×¤×¨×•×™×§×˜ ×©×œ×š)
          flake8 src tests

      - name: Run tests
        run: |
          pytest
</code></pre>
<h4 dir="rtl">ğŸŒ CI/CD ×¢×‘×•×¨ Node.js (×¢× <span dir="ltr">npm test</span> ×•-<span dir="ltr">eslint</span>)</h4>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/node-ci.yml
name: Node.js CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [18.x] # ×¦×™×™×Ÿ ××ª ×’×¨×¡×ª Node.js ×©×œ×š

    steps:
      - uses: actions/checkout@v3

      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}

      - name: Install dependencies
        run: npm install # ××• npm ci ×œ×”×ª×§× ×” ×¦×¤×•×™×” ×™×•×ª×¨

      - name: Lint with ESLint
        run: npx eslint . # ×•×“× ×©-ESLint ××•×’×“×¨ ×‘×¤×¨×•×™×§×˜

      - name: Run tests
        run: npm test
</code></pre>
<h4 dir="rtl">ğŸ³ CI/CD ×¢×‘×•×¨ Docker (×‘× ×™×™×” ×•×“×—×™×¤×” ×œ-Docker Hub)</h4>
<p dir="rtl">×œ×“×•×’××” ×–×•, ×ª×–×“×§×§×• ×œ×¡×•×“×•×ª <span dir="ltr">DOCKER_USERNAME</span> ×•-<span dir="ltr">DOCKER_PASSWORD</span> (××• ××¡×™××•×Ÿ) ×‘×”×’×“×¨×•×ª ×××’×¨ ×”-<span dir="ltr">GitHub</span> ×©×œ×›× (<span dir="ltr">Settings -> Secrets and variables -> Actions</span>).</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/docker-ci.yml
name: Docker CI/CD

on:
  push:
    branches: [ main ] # ×”×¤×¢×œ ×¨×§ ×¢×‘×•×¨ ×¢× ×£ main

jobs:
  docker:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Log in to Docker Hub
        run: echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin

      - name: Build Docker image
        # ×”×—×œ×£ ××ª myapp ×‘×©× ×”×™×™×©×•× ×©×œ×š
        run: docker build -t ${{ secrets.DOCKER_USERNAME }}/myapp:latest .

      - name: Push Docker image
        run: docker push ${{ secrets.DOCKER_USERNAME }}/myapp:latest
</code></pre>
<h3 dir="rtl">ğŸšš ×¤×¨×™×¡×” ×œ×¤×œ×˜×¤×•×¨××•×ª ×¤×•×¤×•×œ×¨×™×•×ª</h3>
<p dir="rtl">×›×¢×ª, ×›×©×™×© ×œ× ×• ××¨×˜×™×¤×§×˜×™× ×‘× ×•×™×™× ×•× ×‘×“×§×™× (×œ×“×•×’××”, ×ª××•× ×ª <span dir="ltr">Docker</span>), ×‘×•××• × ×¨××” ×›×™×¦×“ × ×™×ª×Ÿ ×œ×¤×¨×•×¡ ××•×ª×.</p>
<h4 dir="rtl">ğŸŸ£ ×¤×¨×™×¡×” ×œ-Heroku</h4>
<p dir="rtl"><strong>ğŸ” ×¡×•×“×•×ª GitHub:</strong> <span dir="ltr">HEROKU_API_KEY</span>, <span dir="ltr">HEROKU_APP_NAME</span>.</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-heroku.yml
name: Deploy to Heroku

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install Heroku CLI
        run: curl https://cli-assets.heroku.com/install.sh | sh
      - name: Login to Heroku
        env:
          HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
        run: heroku auth:token
      - name: Deploy to Heroku
        env:
          HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
        run: |
          heroku git:remote -a ${{ secrets.HEROKU_APP_NAME }}
          git push heroku main -f # ×”×™×–×”×¨ ×¢× -f (force push)
</code></pre>
<p dir="rtl">×× ××ª× ×¤×•×¨×¡×™× ×ª××•× ×ª <span dir="ltr">Docker</span> ×œ-<span dir="ltr">Heroku</span>:</p>
<pre class="line-numbers"><code class="language-yaml"># ... (×©×œ×‘×™ build ×•-login ×œ-Docker Hub/GHCR ××“×•×’×××•×ª ×§×•×“××•×ª) ...
# deploy:
#   name: Deploy to Heroku
#   needs: build # ×ª×œ×•×™ ×‘××©×™××ª ×‘× ×™×™×ª ×”×ª××•× ×”
#   runs-on: ubuntu-latest
#   steps:
#     # ...
#     - name: Login to Heroku container registry
#       run: echo "${{ secrets.HEROKU_API_KEY }}" | docker login --username=_ --password-stdin registry.heroku.com
#     - name: Tag image for Heroku
#       # ×‘×”× ×—×” ×©×”×ª××•× ×” × ×‘× ×™×ª ×›-ghcr.io/username/repo/myapp:latest
#       run: docker tag ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:latest registry.heroku.com/${{ secrets.HEROKU_APP_NAME }}/web
#     - name: Push image to Heroku
#       run: docker push registry.heroku.com/${{ secrets.HEROKU_APP_NAME }}/web
#     - name: Release Heroku App
#       env:
#         HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
#       run: heroku container:release web --app ${{ secrets.HEROKU_APP_NAME }}
</code></pre>
<h4 dir="rtl">ğŸŸ¨ ×¤×¨×™×¡×” ×œ-AWS (×œ×“×•×’××”, ×§×‘×¦×™× ×¡×˜×˜×™×™× ×œ-S3)</h4>
<p dir="rtl"><strong>ğŸ” ×¡×•×“×•×ª GitHub:</strong> <span dir="ltr">AWS_ACCESS_KEY_ID</span>, <span dir="ltr">AWS_SECRET_ACCESS_KEY</span>, <span dir="ltr">AWS_REGION</span>, <span dir="ltr">S3_BUCKET_NAME</span>.</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-aws-s3.yml
name: Deploy Static Site to AWS S3

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}
      - name: Sync files to S3
        # ×”×—×œ×£ ××ª ./public ×‘× ×ª×™×‘ ×œ×§×‘×¦×™× ×”×¡×˜×˜×™×™× ×©×œ×š
        run: aws s3 sync ./public s3://${{ secrets.S3_BUCKET_NAME }} --delete
</code></pre>
<p dir="rtl">×œ×¤×¨×™×¡×” ×œ-<span dir="ltr">**AWS Elastic Beanstalk**</span> ××©×ª××©×™× ×‘×“×¨×š ×›×œ×œ ×‘-<span dir="ltr">EB CLI</span>, ×”×¦×™× ×•×¨ ×™×”×™×” ×“×•××”, ××š ×¢× ×¤×§×•×“×•×ª <span dir="ltr">eb deploy</span>.</p>
<h4 dir="rtl">ğŸ”µ ×¤×¨×™×¡×” ×œ-Google Cloud Platform (GCP App Engine)</h4>
<p dir="rtl"><strong>ğŸ” ×¡×•×“×•×ª GitHub:</strong> <span dir="ltr">GCP_CREDENTIALS</span> (××¤×ª×— <span dir="ltr">JSON</span> ×©×œ ×—×©×‘×•×Ÿ ×©×™×¨×•×ª), <span dir="ltr">GCP_PROJECT_ID</span>.</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-gcp-app-engine.yml
name: Deploy to GCP App Engine

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Cloud SDK
        uses: google-github-actions/setup-gcloud@v2
        with:
          project_id: ${{ secrets.GCP_PROJECT_ID }}
          service_account_key: ${{ secrets.GCP_CREDENTIALS }}
          export_default_credentials: true
      - name: Deploy to App Engine
        # ×•×“× ×©×™×© ×œ×š app.yaml ×‘×©×•×¨×© ×”×¤×¨×•×™×§×˜
        run: gcloud app deploy --quiet
</code></pre>
<h4 dir="rtl">ğŸŸª ×¤×¨×™×¡×” ×œ-Render.com</h4>
<p dir="rtl"><span dir="ltr">Render</span> ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×¤×•×¨×¡ ××•×˜×•××˜×™×ª ×‘×“×—×™×¤×” ×œ-<span dir="ltr">GitHub</span> ×× ×”×××’×¨ ××—×•×‘×¨. ××š ×¢×‘×•×¨ ×˜×¨×™×’×¨ ×™×“× ×™ (××• ×›×—×œ×§ ××¦×™× ×•×¨ ××•×¨×›×‘ ×™×•×ª×¨), × ×™×ª×Ÿ ×œ×”×©×ª××© ×‘-<span dir="ltr">Deploy Hook</span>.<br>
<strong>ğŸ” ×¡×•×“×•×ª GitHub:</strong> <span dir="ltr">RENDER_DEPLOY_HOOK</span> (<span dir="ltr">URL</span> ×©×”×ª×§×‘×œ ××”×’×“×¨×•×ª ×©×™×¨×•×ª <span dir="ltr">Render</span>).</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-render.yml
name: Trigger Render Deploy

on:
  workflow_dispatch: # ×˜×¨×™×’×¨ ×™×“× ×™ ×-UI ×©×œ GitHub

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render Deploy Hook
        run: curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK }}
</code></pre>
<h3 dir="rtl">ğŸŒŸ CI/CD ××ª×§×“×: ×‘× ×™×™×ª Docker â† ×“×—×™×¤×” ×œ-GHCR â† Staging/Production ×‘-GCP Cloud Run</h3>
<p dir="rtl">×•×¢×›×©×™×• ×”×“×•×‘×“×‘×Ÿ ×©×‘×§×¦×¤×ª! ×‘×•××• × ×‘× ×” ×¦×™× ×•×¨ ××ª×§×“×:
</p>
<ol dir="rtl">
<li>×‘× ×™×™×ª ×ª××•× ×ª <span dir="ltr">Docker</span>.</li>
<li>×¤×¨×¡×•× ×ª××•× ×” ×‘-<span dir="ltr">GitHub Container Registry (ghcr.io)</span>.</li>
<li>×¤×¨×™×¡×” ××•×˜×•××˜×™×ª ×œ×¡×‘×™×‘×ª <span dir="ltr">**staging**</span> ×‘-<span dir="ltr">GCP Cloud Run</span>.</li>
<li>×¤×¨×™×¡×” ×œ×¡×‘×™×‘×ª <span dir="ltr">**production**</span> ×‘-<span dir="ltr">GCP Cloud Run</span> **×œ××—×¨ ××™×©×•×¨ ×™×“× ×™**.</li>
</ol>
<p dir="rtl">×œ×©× ×›×š, × ×–×“×§×§ ×œ××¡×¤×¨ ×§×‘×¦×™ ×–×¨×™××ª ×¢×‘×•×“×”.</p>
<p dir="rtl"><strong>×¡×•×“×•×ª GitHub × ×“×¨×©×™×:</strong></p>
<ul dir="rtl">
<li><span dir="ltr">GCP_PROJECT_ID</span>: ××–×”×” ×”×¤×¨×•×™×§×˜ ×©×œ×›× ×‘-<span dir="ltr">GCP</span>.</li>
<li><span dir="ltr">GCP_CREDENTIALS</span>: ××¤×ª×— <span dir="ltr">JSON</span> ×©×œ ×—×©×‘×•×Ÿ ×©×™×¨×•×ª <span dir="ltr">GCP</span> ×¢× ×”×¨×©××•×ª ×œ×¤×¨×™×¡×” ×œ-<span dir="ltr">Cloud Run</span> ×•×’×™×©×” ×œ-<span dir="ltr">GHCR</span> (×× × ×“×¨×©). ×‘×“×¨×š ×›×œ×œ <span dir="ltr">GITHUB_TOKEN</span> ××¡×¤×™×§ ×œ×’×™×©×” ×œ-<span dir="ltr">GHCR</span> ×-<span dir="ltr">Actions</span>.</li>
<li><span dir="ltr">GCP_REGION</span>: ××–×•×¨ ×¢×‘×•×¨ <span dir="ltr">Cloud Run</span> (×œ×“×•×’××”, <span dir="ltr">europe-west1</span>).</li>
</ul>
<h4 dir="rtl">1. ×‘× ×™×™×” ×•×¤×¨×¡×•× ×ª××•× ×ª Docker ×‘-GHCR</h4>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/build.yml
name: Build & Push to GHCR

on:
  push:
    branches: [main] # ×”×¤×¢×œ ×‘×“×—×™×¤×” ×œ-main

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    permissions:
      contents: read      # ×¢×‘×•×¨ checkout
      packages: write     # ×¢×‘×•×¨ push ×œ-GHCR

    steps:
      - uses: actions/checkout@v3

      - name: Log in to GitHub Container Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push Docker image
        uses: docker/build-push-action@v5
        with:
          context: .
          push: true
          tags: ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:latest
          # × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×ª×™×•×’ ×œ×¤×™ SHA ×©×œ ×§×•××™×˜ ×œ×™×™×—×•×“×™×•×ª:
          # tags: |
          #   ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:latest
          #   ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:${{ github.sha }}
</code></pre>
<ul dir="rtl">
<li><span dir="ltr">github.repository_owner</span>: ×‘×¢×œ ×”×××’×¨ (×©× ×”××©×ª××© ××• ×”××¨×’×•×Ÿ ×©×œ×›×).</li>
<li><span dir="ltr">github.event.repository.name</span>: ×©× ×”×××’×¨.</li>
<li><span dir="ltr">myapp</span>: ×©× ×”×™×™×©×•×/×ª××•× ×” ×©×œ×›×.</li>
</ul>
<h4 dir="rtl">2. ×¤×¨×™×¡×” ××•×˜×•××˜×™×ª ×œ-Staging (GCP Cloud Run)</h4>
<p dir="rtl">×–×¨×™××ª ×¢×‘×•×“×” ×–×• ×ª×•×¤×¢×œ ××•×˜×•××˜×™×ª ×œ××—×¨ ×©-<span dir="ltr">build.yml</span> ×™×¡×ª×™×™× ×‘×”×¦×œ×—×”.</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-staging.yml
name: Deploy to GCP Cloud Run (Staging)

on:
  workflow_run:
    workflows: ["Build & Push to GHCR"]
    types:
      - completed

jobs:
  deploy-staging:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}

    environment:
      name: staging
      url: ${{ steps.deploy.outputs.url }}

    steps:
      - uses: actions/checkout@v3

      - id: 'auth'
        uses: 'google-github-actions/auth@v2'
        with:
          credentials_json: '${{ secrets.GCP_CREDENTIALS }}'

      - name: 'Deploy to Cloud Run (Staging)'
        id: deploy
        uses: 'google-github-actions/deploy-cloudrun@v2
        with:
          service: 'myapp-staging'
          region: '${{ secrets.GCP_REGION }}'
          image: 'ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:latest'
          project_id: '${{ secrets.GCP_PROJECT_ID }}'
          flags: '--allow-unauthenticated --platform=managed'
</code></pre>
<h4 dir="rtl">3. ×¤×¨×™×¡×” ×œ-Production ×¢× ××™×©×•×¨ ×™×“× ×™ (GCP Cloud Run)</h4>
<p dir="rtl">×–×¨×™××ª ×¢×‘×•×“×” ×–×• ××•×¤×¢×œ×ª ×™×“× ×™×ª ×“×¨×š ×××©×§ ×”××©×ª××© ×©×œ <span dir="ltr">GitHub Actions</span>.</p>
<pre class="line-numbers"><code class="language-yaml"># .github/workflows/deploy-prod.yml
name: Deploy to GCP Cloud Run (Production)

on:
  workflow_dispatch: # ×××¤×©×¨ ×˜×¨×™×’×¨ ×™×“× ×™

jobs:
  deploy-production:
    runs-on: ubuntu-latest

    environment:
      name: production
      url: ${{ steps.deploy.outputs.url }}

    steps:
      - uses: actions/checkout@v3

      - id: 'auth'
        uses: 'google-github-actions/auth@v2'
        with:
          credentials_json: '${{ secrets.GCP_CREDENTIALS }}'

      - name: 'Deploy to Cloud Run (Production)'
        id: deploy
        uses: 'google-github-actions/deploy-cloudrun@v2'
        with:
          service: 'myapp-production'
          region: '${{ secrets.GCP_REGION }}'
          image: 'ghcr.io/${{ github.repository_owner }}/${{ github.event.repository.name }}/myapp:latest'
          project_id: '${{ secrets.GCP_PROJECT_ID }}'
          flags: '--allow-unauthenticated --platform=managed'
          # ×¢×‘×•×¨ production, × ×™×ª×Ÿ ×œ×”×•×¡×™×£ --no-traffic ×•×œ××—×¨ ××›×Ÿ ×œ×”×¢×‘×™×¨ ×ª× ×•×¢×” ×‘×”×“×¨×’×”
          # traffic:
          #   latest: true
          #   percent: 100
</code></pre>
<p dir="rtl"><strong>× ×§×•×“×•×ª ×—×©×•×‘×•×ª ×‘×¦×™× ×•×¨ ××ª×§×“× ×–×”:</strong></p>
<ul dir="rtl">
<li><span dir="ltr"><strong>GitHub Container Registry (ghcr.io):</strong></span> ×× ×• ××©×ª××©×™× ×‘×• ×œ××—×¡×•×Ÿ ×ª××•× ×•×ª <span dir="ltr">Docker</span>. ×–×” × ×•×— ××›×™×•×•×Ÿ ×©×”×•× ××©×•×œ×‘ ×”×™×˜×‘ ×¢× <span dir="ltr">GitHub Actions</span>.</li>
<li><span dir="ltr"><strong>workflow_run:</strong></span> ×××¤×©×¨ ×œ×”×¤×¢×™×œ ×–×¨×™××ª ×¢×‘×•×“×” ××—×ª (×¤×¨×™×¡×ª <span dir="ltr">staging</span>) ×¢× ×”×©×œ××ª ××—×¨×ª (×‘× ×™×™×”).</li>
<li><span dir="ltr"><strong>workflow_dispatch:</strong></span> ××¡×¤×§ ××ª ×”×™×›×•×œ×ª ×œ×”×¤×¢×™×œ ×™×“× ×™×ª ×–×¨×™××ª ×¢×‘×•×“×” (×¤×¨×™×¡×ª <span dir="ltr">production</span>), ××” ×©××‘×˜×™×— ×©×œ×™×˜×”.</li>
<li><span dir="ltr"><strong>GitHub Environments:</strong></span> ×××¤×©×¨×™× ×œ×›× ×œ×”×’×“×™×¨ ×›×œ×œ×™ ×”×’× ×” ×¢×‘×•×¨ <span dir="ltr">production</span> (×œ×“×•×’××”, ×“×¨×™×©×ª ××™×©×•×¨ ×××‘×§×¨×™× ×¡×¤×¦×™×¤×™×™×) ×•×œ××—×¡×Ÿ ×¡×•×“×•×ª ×¡×¤×¦×™×¤×™×™× ×œ×¡×‘×™×‘×”.</li>
<li><span dir="ltr"><strong>GCP Cloud Run:</strong></span> ××¤×©×¨×•×ª <span dir="ltr">serverless</span> ××¦×•×™× ×ª ×œ×”×¤×¢×œ×ª ×™×™×©×•××™× ××‘×•×¡×¡×™ ×§×•× ×˜×™×™× ×¨×™×.</li>
</ul>
<h3 dir="rtl">ğŸ” ××‘×˜×—×” â€“ ×–×” ×—×©×•×‘!</h3>
<ul dir="rtl">
<li><span dir="ltr"><strong>×”×©×ª××©×• ×‘×¡×•×“×•×ª GitHub:</strong></span> ×œ×¢×•×œ× ××œ ×ª×©××¨×• ××¡×™××•× ×™×, ×¡×™×¡×××•×ª, ××¤×ª×—×•×ª <span dir="ltr">API</span> ×™×©×™×¨×•×ª ×‘×§×‘×¦×™ <span dir="ltr">YAML</span>. ×”×©×ª××©×• ×‘-<span dir="ltr">Settings -> Secrets and variables -> Actions</span> ×‘×××’×¨ ×©×œ×›×.</li>
<li><span dir="ltr"><strong>×”×¨×©××•×ª ××™× ×™××œ×™×•×ª:</strong></span> ×¢×‘×•×¨ ×—×©×‘×•× ×•×ª ×©×™×¨×•×ª (×œ×“×•×’××”, <span dir="ltr">GCP</span>), ×”×¢× ×™×§×• ×¨×§ ××ª ×”×”×¨×©××•×ª ×”× ×—×•×¦×•×ª ×‘×™×•×ª×¨ ×œ×‘×™×¦×•×¢ ××©×™××•×ª <span dir="ltr">CI/CD</span>.</li>
<li><span dir="ltr"><strong>×‘×•×“×“×• ×¡×‘×™×‘×•×ª:</strong></span> <span dir="ltr">Staging</span> ×•-<span dir="ltr">Production</span> ×¦×¨×™×›×™× ×œ×”×™×•×ª ××‘×•×“×“×™× ×›×›×œ ×”××¤×©×¨. ×¤×¨×•×™×§×˜×™×/×—×©×‘×•× ×•×ª ×©×•× ×™× ×‘×¡×¤×§×™ ×¢× ×Ÿ ×”× ×¤×¨×§×˜×™×§×” ×˜×•×‘×”.</li>
<li><span dir="ltr"><strong>×”×’× ×ª ×¢× ×¤×™×:</strong></span> ×”×’×“×™×¨×• ×”×’× ×” ×¢×‘×•×¨ ×¢× ×£ <span dir="ltr">main</span> (××• <span dir="ltr">master</span>) ×›×š ×©×“×—×™×¤×•×ª ××œ×™×• ×™×”×™×• ××¤×©×¨×™×•×ª ×¨×§ ×‘×××¦×¢×•×ª <span dir="ltr">Pull Requests</span> ×¢× ×‘×“×™×§×•×ª <span dir="ltr">CI</span> ×—×•×‘×”.</li>
</ul>