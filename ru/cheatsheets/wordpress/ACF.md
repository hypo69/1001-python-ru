Отлично! Я подготовлю подробную **пошаговую статью для начинающих**, как сделать мульти-язычные тексты в WordPress с помощью разметки `[:en]…[:]`, ACF, WPML/Polylang и нашего универсального хелпера. Будет подробно, с примерами и объяснениями.

---

# Мульти-язычные тексты в WordPress: подробное руководство для начинающих

WordPress сам по себе не умеет хранить один текст на нескольких языках в одном поле. Чтобы создать мультиязычную систему, мы можем использовать разметку типа `[:en]…[:es]…[:]` и небольшой хелпер, который автоматически будет показывать **только текст на текущем языке**.

Эта статья подойдёт для новичков, которые хотят:

* Использовать ACF (Advanced Custom Fields) или обычные поля WordPress.
* Работать с WPML, Polylang или стандартным WordPress.
* Автоматически выводить нужный язык на фронтенде.

---

## 1️⃣ Подготовка

### 1.1 Что нам понадобится

1. WordPress последней версии
2. Плагин **ACF (Advanced Custom Fields)** для удобного создания полей
3. Плагин **WPML** или **Polylang**, если нужен мультиязычный сайт
4. Доступ к файлам темы (лучше дочерней)

---

### 1.2 Принцип работы

Мы будем использовать формат строки:

```
[:en]Text in English[:es]Texto en Español[:fr]Texte en Français[:]
```

* `[:en]…[:]` – английский
* `[:es]…[:]` – испанский
* `[:fr]…[:]` – французский
* И так далее для других языков

На фронтенде функция хелпера будет **определять текущий язык** и показывать только нужный текст.

---

## 2️⃣ Создание хелпера

### 2.1 Создаём файл

В папке темы создаём, например:

```
/wp-content/themes/your-child-theme/inc/lang_string_helper.php
```

### 2.2 Вставляем код хелпера

Сюда вставляем универсальный код, который я писал ранее. Он включает:

* Функции для любой строки `get_lang_string()`
* ACF-хелперы `get_acf_lang()` / `the_acf_lang()`
* Постовые хелперы `get_post_lang()` / `the_post_lang()`
* Опции `get_option_lang()`
* Таксономии `get_term_lang()`
* Универсальный `the_lang_string()`

---

### 2.3 Подключаем хелпер в `functions.php`

```php
require_once get_stylesheet_directory() . '/inc/lang_string_helper.php';
```

Теперь все функции будут доступны во всей теме.

---

## 3️⃣ Использование

### 3.1 ACF-поля

1. Создаём поле, например `subtitle`
2. Вводим текст с разметкой:

```
[:en]In This Article[:es]En Este Artículo[:fr]Dans Cet Article[:]
```

3. В шаблоне выводим:

```php
// Получить значение в переменную
$subtitle = get_acf_lang('subtitle');
echo "<h2>$subtitle</h2>";

// Или сразу вывести
the_acf_lang('subtitle');
```

---

### 3.2 Заголовки и контент постов

```php
// Получить заголовок на текущем языке
$title = get_post_lang($post); // по умолчанию 'post_title'

// Вывести
the_post_lang($post);

// Контент
the_post_lang($post, 'post_content');
```

---

### 3.3 Опции сайта

```php
// Опция с мульти-язычным текстом
echo get_option_lang('my_option_name');
```

---

### 3.4 Таксономии

```php
// Название категории/тега
the_term_lang($term, 'name');

// Описание категории/тега
$description = get_term_lang($term, 'description');
```

---

### 3.5 Любая строка

```php
the_lang_string('[:en]Hello[:es]Hola[:fr]Bonjour[:]');
```

---

## 4️⃣ Преимущества

* Работает со всеми текстовыми сущностями WordPress
* Совместим с WPML, Polylang и стандартным WordPress
* Разделение получения значения (`get_…`) и вывода (`the_…`) — считается современным стилем
* Автоматический фоллбэк, если текущего языка нет
* Легко расширять на кастомные поля и другие сущности

---

## 5️⃣ Советы для новичков

1. **Всегда используйте дочернюю тему** — чтобы не потерять изменения при обновлении темы
2. **Следите за форматированием строки**: обязательно закрывайте все блоки `[:]`
3. **Используйте хелперы в шаблонах** — так проще поддерживать код
4. **Тестируйте все языки** в админке и на фронтенде

---

## 6️⃣ Дальше

Если захочешь, можно сделать **ещё более автоматическую интеграцию**, которая будет **перехватывать стандартные функции WordPress** (`the_title()`, `the_content()`) и автоматически подставлять нужный язык без правки шаблонов.

Это удобно для крупных сайтов с множеством постов и страниц.

---

Если хочешь, я могу прямо сейчас написать **такую “магическую” интеграцию**, чтобы весь стандартный вывод WordPress был мультиязычным автоматически.

Хочешь, чтобы я это сделал?
