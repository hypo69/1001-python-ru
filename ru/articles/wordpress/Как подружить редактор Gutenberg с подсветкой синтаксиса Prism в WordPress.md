&nbsp;&nbsp;&nbsp;&nbsp;Когда мы создаем контент WordPress, чаще всего используем редактор **Gutenberg**. Он появился в версии **WordPress 5.0** (в декабре 2018 года) и заменил старый добрый **TinyMCE**. TinyMCE был обычным текстовым редактором из поколения **Web 1.0** и над полем типа `<textarea>` устанавливал простые кнопки вроде «жирный», «курсив» и «ссылка». Весь текст хранился одной сплошной лентой HTML-кода — переместить блок или вставить что-то посередине было неудобно. Кроме того, TinyMCE **не поддерживал адаптивную 12-колоночную разметку**, которая стала стандартом де-факто во времена **Web 2.0**, поэтому сложные макеты приходилось строить вручную с помощью HTML и CSS. 

## Gutenberg - редактор нового поколения
Gutenberg решил эту проблему: теперь каждая часть страницы существует как **блок** — заголовок, параграф, цитата, изображение, таблица или фрагмент кода живут отдельно, и это делает редактирование заметно проще, а страницы — гибкими и адаптивными. Контент должен одинаково хорошо выглядеть на любых устройствах — от телефона до широкоформатного монитора. Когда сайт не адаптируется к экрану, текст «плывёт», изображения обрезаются, а таблицы вылезают за границы блока. Решается это с помощью **адаптивной разметки**, которая перестраивается автоматически. В основе такой разметки лежит **12-колоночная сетка**. Она стала стандартом благодаря фреймворкам вроде **Bootstrap** и **Foundation**, и Gutenberg тоже использует тот же принцип: ширина контейнера делится на 12 равных частей (по 8.33 % каждая), и из них можно собрать практически любую компоновку:

1 колонка → [████████████] 100%

2 колонки → [██████][██████] 6/6

3 колонки → [████][████][████] 4/4/4

4 колонки → [███][███][███][███] 3/3/3/3

На мобильных устройствах колонки автоматически выстраиваются вертикально — так контент остаётся читаемым и аккуратным при любой ширине экрана.

Такая структура даёт гибкость при создании макетов и позволяет контенту выглядеть аккуратно на любом экране. Внутри Gutenberg эта идея реализована через **блок “Колонки” (Columns)**, который автоматически подстраивает расположение элементов под ширину экрана. На уровне HTML это обычные контейнеры с классами `wp-block-columns` и `wp-block-column`, а в CSS применяется **Flexbox**, который отвечает за выравнивание и поведение колонок при изменении размеров окна.

Пример внутренней структуры можно увидеть в упрощённом виде:

```html
<div class="wp-block-columns">
  <div class="wp-block-column">
    <p>Первая колонка</p>
  </div>
  <div class="wp-block-column">
    <p>Вторая колонка</p>
  </div>
</div>
```

По сути, Gutenberg автоматически создаёт гибкий контейнер, который можно делить на нужное количество колонок. При уменьшении экрана колонки становятся вертикальными — и это достигается не JavaScript-скриптами, а чисто с помощью CSS.

```css
.wp-block-columns {
  display: flex;
  flex-wrap: wrap;
  gap: 2em;
}
.wp-block-column {
  flex-grow: 1;
  flex-basis: 0;
  min-width: 0;
}
@media (max-width: 600px) {
  .wp-block-columns {
    flex-direction: column;
  }
}
```

Такая реализация делает редактор Gutenberg универсальным: одна и та же страница одинаково корректно отображается и на телефоне, и на широком мониторе.

Но из всех возможностей редактора нас интересует всего один элемент — **блок кода**. Он используется, когда нужно показать пример программы, скрипта, конфигурации или команды терминала. Технически это простой HTML-контейнер:

```html
<pre> ... </pre>
```

Gutenberg и TinyMCE отображают его одинаково — **как текст, набранный моноширинным шрифтом** (чаще всего `Consolas`, `Courier New` или `Monaco`). Без подсветки, без нумерации строк, без выделения синтаксиса. Это решение логично — большинству пользователей подсветка не нужна, а включи её для всех, и редактор стал бы сложнее и тяжелее. Но если вы публикуете примеры кода, инструкции или статьи для разработчиков, то отсутствие подсветки делает материал трудно читаемым. В этом случае на помощь приходит библиотека **Prism.js**, которая решает проблему просто и изящно.

---
**Prism.js — библиотека для подсветки кода**

Prism.js — лёгкая и быстрая библиотека, созданная специально для подсветки синтаксиса на веб-страницах. Она не требует серверных модулей и работает полностью в браузере: скрипт на JavaScript анализирует содержимое тегов `<pre><code>...</code></pre>`, а таблица стилей `prism.css` раскрашивает ключевые слова, строки, комментарии и другие элементы кода.

По сути, Prism делает для веб-страниц то же самое, что делают IDE для программистов — делает код понятным и визуально структурированным. Поддерживаются десятки языков программирования (от HTML, CSS и JavaScript до Python, PHP и Go) и множество плагинов: нумерация строк, подсветка конкретных строк, отображение языка, копирование в буфер, тёмная и светлая темы.

Пример разметки выглядит просто:

```html
<pre><code class="language-js">
function hello(name) {
  return `Hello, ${name}!`;
}
</code></pre>
```

После подключения Prism.js и Prism.css этот код автоматически подсвечивается в браузере, без дополнительного вмешательства.

Библиотека особенно хорошо сочетается с Gutenberg, потому что не требует изменения самого редактора — она работает уже **на этапе отображения статьи**, обрабатывая всё, что находится между тегами `<pre>` и `<code>`.









Тема в WordPress — это набор файлов, которые определяют, **как выглядит и работает ваш сайт**: от шаблонов страниц до цветов, шрифтов и структуры меню.
Именно тема отвечает за внешний облик сайта, а не за его содержимое (которое хранится в базе данных).

---

### ❗ Почему нельзя менять родительскую тему напрямую

Если вы внесёте правки прямо в файлы активной темы, все изменения **исчезнут при обновлении** — WordPress заменит старые файлы на новые.
Это означает, что даже небольшое обновление может стереть ваши доработки.

---

### ✅ Что такое дочерняя тема

**Дочерняя тема (child theme)** — это отдельная папка, которая:

* наследует всё содержимое родительской темы;
* может добавлять или переопределять файлы;
* сохраняет изменения даже после обновлений родителя.

Это безопасный способ модифицировать тему, не рискуя потерять свой код.

---

### 🧩 Как создать дочернюю тему

1. В каталоге `/wp-content/themes/` создайте новую папку, например:
   `mytheme-child`

2. Добавьте в неё файл `style.css` с описанием:

   ```css
   /*
    Theme Name:   MyTheme Child
    Template:     mytheme
    Version:      1.0
   */
   ```

   Здесь:

   * **Theme Name** — название темы, которое появится в админке;
   * **Template** — папка родительской темы (например, `mytheme`);
   * **Version** — произвольный номер версии.

3. Создайте файл `functions.php` с подключением стилей родителя:

   ```php
   <?php
   add_action('wp_enqueue_scripts', 'child_enqueue_styles');
   function child_enqueue_styles() {
       wp_enqueue_style('parent-style', get_template_directory_uri() . '/style.css');
       wp_enqueue_style('child-style',
           get_stylesheet_directory_uri() . '/style.css',
           array('parent-style')
       );
   }
   ```

4. Зайдите в **«Внешний вид → Темы»** и активируйте свою дочернюю тему.

---

### 💡 Преимущества использования дочерней темы

* Безопасно обновлять родительскую тему.
* Легко тестировать новые функции.
* Удобно восстанавливать изменения (всё хранится отдельно).
* Подходит для кастомизации готовых шаблонов без потери поддержки.

---

Таким образом, **дочерняя тема** — это стандартный, рекомендуемый WordPress-способ изменять оформление сайта, не нарушая структуру и совместимость оригинальной темы.


















---

## Как подключить Prism.js к WordPress



### Шаг 1. Скачиваем сборку Prism.js

Перейдите на официальный сайт:
👉 [https://prismjs.com/download.html](https://prismjs.com/download.html)

Выберите параметры для своей сборки:

* **Compression level:** `Minified`
* **Languages:** `HTML`, `CSS`, `JavaScript`, `PHP`, `Python`, `JSON`
* **Plugins:** `Line Numbers`, `Toolbar`, `Copy to Clipboard Button`

После этого скачайте два файла — `prism.js` и `prism.css`, затем поместите их в папку дочерней темы:

```
/wp-content/themes/my-child-theme/
```

---



---

### Шаг 2. Подключаем Prism.js через `functions.php`

Добавьте в `functions.php` дочерней темы код:

```php
<?php
add_action('wp_enqueue_scripts', 'theme_enqueue_prism_assets');

function theme_enqueue_prism_assets() {
    $version = '1.29.0';
    wp_enqueue_style('prism-css',
        get_stylesheet_directory_uri() . '/prism.css', [], $version);
    wp_enqueue_script('prism-js',
        get_stylesheet_directory_uri() . '/prism.js', [], $version, true);
}
```

После этого Prism будет загружаться на всех страницах сайта и подсвечивать код в блоках `<pre><code>…</code></pre>`.

---

### Шаг 3. Добавляем автоматическую нумерацию строк

Чтобы не добавлять класс вручную, используем фильтр WordPress, который добавит его ко всем блокам кода:

```php
<?php
add_filter('render_block_core/code', 'theme_add_prism_line_numbers', 10, 2);

function theme_add_prism_line_numbers($content, $block) {
    return str_replace(
        '<pre class="wp-block-code">',
        '<pre class="wp-block-code line-numbers">',
        $content
    );
}
```

Теперь все примеры кода будут красиво пронумерованы.

---

### Шаг 4. Экранируем HTML-символы

Если в коде встречаются символы `<` или `>`, браузер может попытаться интерпретировать их как HTML-теги.
Чтобы этого избежать, добавим фильтр, который заменяет эти символы на безопасные HTML-сущности при сохранении поста:

```php
<?php
add_filter('content_save_pre', 'theme_escape_code_on_save');

function theme_escape_code_on_save($content) {
    return preg_replace_callback(
        '/<code([^>]*)>(.*?)<\/code>/is',
        function ($m) {
            $attrs = $m[1];
            $code  = htmlspecialchars($m[2], ENT_NOQUOTES, 'UTF-8');
            return "<code{$attrs}>{$code}</code>";
        },
        $content
    );
}
```

Теперь HTML-разметка внутри блоков кода не ломает вёрстку страницы.

---

### Шаг 5. Добавляем стили оформления

Добавьте в `style.css` дочерней темы:

```css
pre[class*="language-"] {
  border-radius: 6px;
  border: 1px solid #ddd;
  padding: 1em;
  background: #f6f8fa;
  font-family: 'Fira Code', Consolas, monospace;
  font-size: 14px;
  line-height: 1.6;
  overflow: auto;
}

pre[class*="language-"].line-numbers {
  padding-left: 3.8em;
}
```

---

### Дополнительные возможности Prism.js

**🔢 Нумерация строк**
Добавляет аккуратные номера слева от каждой строки — как в IDE.

**🧠 Подсветка отдельных строк**
Можно выделить конкретные строки с помощью атрибута `data-line`:

```html
<pre class="line-numbers" data-line="2,4-5"><code class="language-python">
def get_price(value):
    if value < 0:
        return 0
    return value * 1.2
</code></pre>
```

**📋 Кнопка «Скопировать»**
Плагин *Copy to Clipboard* добавляет кнопку для быстрого копирования кода.

**💡 Отображение языка**
Плагин *Show Language* показывает название языка над блоком кода.

**🌗 Тёмная и светлая темы**
Prism поддерживает десятки тем. Можно включить автоматическое переключение:

```css
@media (prefers-color-scheme: dark) {
  body { background: #1e1e1e; color: #d4d4d4; }
}
```

**🎨 Кастомизация цветов**
Изменяйте палитру токенов прямо в `style.css`:

```css
.token.keyword { color: #d73a49; font-weight: 600; }
.token.string  { color: #032f62; }
.token.comment { color: #6a737d; font-style: italic; }
```

---

### Итог

Теперь Gutenberg умеет **красиво и правильно отображать код** — с подсветкой синтаксиса, нумерацией строк, кнопкой «Copy» и без проблем с HTML-тегами.
Всё это работает без плагинов, не ломает верстку и полностью безопасно при обновлениях темы.

---

Хочешь, чтобы я добавил сюда финальный блок — “до и после” (визуальное сравнение обычного и подсвеченного кода)?
