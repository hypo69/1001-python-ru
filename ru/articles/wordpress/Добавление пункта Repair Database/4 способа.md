# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ "Repair Database" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å WordPress: 4 —Å–ø–æ—Å–æ–±–∞

> üìö **–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö**: –≠—Ç–∞ —Å—Ç–∞—Ç—å—è –ø–æ–º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç repair.php –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å WordPress.

## üéØ –ß—Ç–æ –º—ã –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å

–î–æ–±–∞–≤–∏–º –ø—É–Ω–∫—Ç –º–µ–Ω—é, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `https://–≤–∞—à-—Å–∞–π—Ç/wp-admin/maint/repair.php` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö WordPress.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è**: –°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø —Ñ–∞–π–ª–∞ `functions.php`
2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –í–∞–º –Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. **–î–æ—á–µ—Ä–Ω—è—è —Ç–µ–º–∞**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–æ—á–µ—Ä–Ω–µ–π —Ç–µ–º–µ

---

## üõ†Ô∏è –°–ø–æ—Å–æ–± 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–µ–Ω—é "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" (Tools)

### –ö–æ–¥ –¥–ª—è functions.php:

```php
<?php
// –î–æ–±–∞–≤–ª—è–µ–º –ø—É–Ω–∫—Ç –º–µ–Ω—é –≤ —Ä–∞–∑–¥–µ–ª "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
function add_repair_to_tools_menu() {
    // add_management_page() –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—É–Ω–∫—Ç –≤ –º–µ–Ω—é "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
    add_management_page(
        'Repair Database Tools',     // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–≤ title)
        'Repair Database',           // –¢–µ–∫—Å—Ç –≤ –º–µ–Ω—é (—á—Ç–æ –≤–∏–¥–∏–º –≤ —Å–ø–∏—Å–∫–µ)
        'manage_options',            // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
        'repair-database-tools',     // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (slug)
        'show_repair_tools_page'     // –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∂–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
    );
}

// –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –ø—É–Ω–∫—Ç –º–µ–Ω—é
function show_repair_tools_page() {
    // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É repair.php
    wp_redirect(admin_url('maint/repair.php'));
    exit; // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
}

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –∫ —Ö—É–∫—É admin_menu
// –•—É–∫ - —ç—Ç–æ –º–æ–º–µ–Ω—Ç –∫–æ–≥–¥–∞ WordPress —Å–æ–∑–¥–∞–µ—Ç –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
add_action('admin_menu', 'add_repair_to_tools_menu');
?>
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- ‚úÖ –ü—É–Ω–∫—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é **Tools ‚Üí Repair Database**
- ‚úÖ –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ repair.php

---

## üé™ –°–ø–æ—Å–æ–± 2: –û—Ç–¥–µ–ª—å–Ω—ã–π –≤–µ—Ä—Ö–Ω–∏–π –ø—É–Ω–∫—Ç –º–µ–Ω—é

### –ö–æ–¥ –¥–ª—è functions.php:

```php
<?php
// –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –≤ –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
function add_repair_main_menu() {
    // add_menu_page() —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ–Ω—é
    add_menu_page(
        'Database Repair Tools',     // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        'Repair DB',                 // –¢–µ–∫—Å—Ç –≤ –º–µ–Ω—é (–∫–æ—Ä–æ—Ç–∫–∏–π)
        'manage_options',            // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
        'repair-database-main',      // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
        'show_repair_main_page',     // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        'dashicons-database-view',   // –ò–∫–æ–Ω–∫–∞ –∏–∑ Dashicons
        25                           // –ü–æ–∑–∏—Ü–∏—è –≤ –º–µ–Ω—é (—á–∏—Å–ª–æ)
    );
}

function show_repair_main_page() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    $repair_file = ABSPATH . 'wp-admin/maint/repair.php';
    
    if (file_exists($repair_file)) {
        wp_redirect(admin_url('maint/repair.php'));
        exit;
    } else {
        // –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        echo '<div class="wrap"><h1>Repair Database</h1>';
        echo '<div class="error"><p>Repair tool not found!</p></div>';
        echo '</div>';
    }
}

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫ —Ö—É–∫—É admin_menu
add_action('admin_menu', 'add_repair_main_menu');
?>
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:
- **–ò–∫–æ–Ω–∫–∏**: `dashicons-database-view` - —ç—Ç–æ –∏–∫–æ–Ω–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ–∑–∏—Ü–∏—è**: –ß–∏—Å–ª–æ 25 - —á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª–µ–≤–µ–µ –≤ –º–µ–Ω—é
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

---

## üîß –°–ø–æ—Å–æ–± 3: –ü–æ–¥–º–µ–Ω—é –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ

### –ö–æ–¥ –¥–ª—è functions.php:

```php
<?php
// –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫ –ø–æ–¥–ø—É–Ω–∫—Ç –≤ –º–µ–Ω—é "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
function add_repair_submenu() {
    // add_submenu_page() –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø—É–Ω–∫—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –º–µ–Ω—é
    add_submenu_page(
        'tools.php',                 // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –º–µ–Ω—é (Tools)
        'WordPress Database Repair', // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        'DB Repair',                 // –¢–µ–∫—Å—Ç –≤ –ø–æ–¥–º–µ–Ω—é (–∫–æ—Ä–æ—Ç–∫–∏–π)
        'manage_options',            // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
        'wp-database-repair',        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
        'display_repair_submenu_page' // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    );
}

function display_repair_submenu_page() {
    // –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
    ?>
    <div class="wrap">
        <h1>Redirecting to Repair Tool...</h1>
        <p>If redirect doesn't work, <a href="<?php echo admin_url('maint/repair.php'); ?>">click here</a>.</p>
    </div>
    <script>
        window.location.href = "<?php echo admin_url('maint/repair.php'); ?>";
    </script>
    <?php
}

add_action('admin_menu', 'add_repair_submenu');
?>
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –µ—Å–ª–∏ JavaScript –æ—Ç–∫–ª—é—á–µ–Ω
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ "DB Repair" –≤ –º–µ–Ω—é

---

## ‚ö° –°–ø–æ—Å–æ–± 4: –ü—Ä—è–º–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)

### –ö–æ–¥ –¥–ª—è functions.php:

```php
<?php
// –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –¥–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞–ø—Ä—è–º—É—é
function add_direct_repair_link() {
    // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–Ω—é
    global $submenu;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –≤ –º–µ–Ω—é "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
    $submenu['tools.php'][] = array(
        'Repair Database',           // –¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏
        'manage_options',            // –¢—Ä–µ–±—É–µ–º—ã–µ –ø—Ä–∞–≤–∞
        admin_url('maint/repair.php') // URL –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
    );
}

add_action('admin_menu', 'add_direct_repair_link');
?>
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –í—Å–µ–≥–æ 5 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ
- ‚úÖ –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–æ–≤

| –°–ø–æ—Å–æ–± | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ì–¥–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|-----------|----------------|--------------|
| 1. –í Tools | üü¢ –õ–µ–≥–∫–æ | Tools ‚Üí Repair Database | –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö |
| 2. –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é | üü° –°—Ä–µ–¥–Ω–µ | –û—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç | –î–ª—è —á–∞—Å—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| 3. –ü–æ–¥–º–µ–Ω—é | üü¢ –õ–µ–≥–∫–æ | Tools ‚Üí DB Repair | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç |
| 4. –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ | üü¢ –û—á–µ–Ω—å –ª–µ–≥–∫–æ | Tools ‚Üí Repair Database | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞ |

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

### 1. **–ù–∞—á–Ω–∏—Ç–µ —Å–æ —Å–ø–æ—Å–æ–±–∞ 1 –∏–ª–∏ 4** - –æ–Ω–∏ —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ
### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –∑–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –Ω–∞–π–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø—É–Ω–∫—Ç
### 3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ—á–µ—Ä–Ω—é—é —Ç–µ–º—É** - —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–µ–º—ã

### –ü—Ä–∏–º–µ—Ä –¥–ª—è –¥–æ—á–µ—Ä–Ω–µ–π —Ç–µ–º—ã:
```php
<?php
// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ functions.php –¥–æ—á–µ—Ä–Ω–µ–π —Ç–µ–º—ã
function my_custom_admin_menu() {
    // –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
    global $submenu;
    $submenu['tools.php'][] = array(
        'üîß Repair DB',
        'manage_options',
        admin_url('maint/repair.php')
    );
}
add_action('admin_menu', 'my_custom_admin_menu');
?>
```

---

## ‚ùå –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –ø—É–Ω–∫—Ç –º–µ–Ω—é –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞** - –≤—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à** - –±—Ä–∞—É–∑–µ—Ä–∞ –∏ WordPress
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥** - –Ω–µ—Ç –ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏** - —Ñ–∞–π–ª error_log –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ 4 —Å–ø–æ—Å–æ–±–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–µ–±–Ω–æ–µ –º–µ–Ω—é –≤ WordPress! –í—ã–±–∏—Ä–∞–π—Ç–µ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–¥–∞—á:

- **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - —Å–ø–æ—Å–æ–± 4
- **–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - —Å–ø–æ—Å–æ–± 1 –∏–ª–∏ 2  
- **–î–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** - —Å–ø–æ—Å–æ–± 2 —Å –∏–∫–æ–Ω–∫–æ–π

–£–¥–∞—á–∏ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ WordPress! üéØ