# cmd

## Категория: Системные оболочки

### Назначение: Классическая командная строка Windows.

### Введение
Командная строка Windows (`cmd.exe`) — это интерпретатор командной строки для операционных систем Windows. Она позволяет пользователям выполнять команды для выполнения различных задач, управления файлами и каталогами, настройки системных параметров и многого другого. Она предоставляет текстовый интерфейс для взаимодействия с операционной системой.

### Важные команды и примеры использования

Ниже приведены некоторые основные команды `cmd` и их использование:

#### 1. `dir` - Отображение списка файлов и подкаталогов

Команда `dir` отображает список файлов и подкаталогов в указанном каталоге.

```cmd
dir [диск:][путь][имя_файла] [/A[[:]атрибуты]] [/B] [/C] [/D] [/L] [/N] [/O[[:]порядок_сортировки]] [/P] [/Q] [/R] [/S] [/T[[:]поле_времени]] [/W] [/X] [/4]
```

**Флаги/Параметры**:
*   `/A[[:]атрибуты]`: Отображает файлы с указанными атрибутами.
    *   `D`: Каталоги
    *   `R`: Файлы только для чтения
    *   `H`: Скрытые файлы
    *   `A`: Файлы, готовые к архивированию
    *   `S`: Системные файлы
    *   `I`: Файлы, не индексированные по содержимому
    *   `L`: Точки повторной обработки
    *   `O`: Автономные файлы
    *   `-`: Префикс, означающий "не" (например, `/A:-H` для исключения скрытых файлов).
*   `/B`: Использует простой формат (без заголовка или сводки), перечисляя только имя каталога или имя файла и расширение.
*   `/S`: Отображает файлы в указанном каталоге и всех подкаталогах.
*   `/P`: Приостанавливает вывод после каждого экрана информации.
*   `/O[[:]порядок_сортировки]`: Сортирует вывод.
    *   `N`: В алфавитном порядке по имени.
    *   `E`: В алфавитном порядке по расширению.
    *   `S`: По размеру, от наименьшего.
    *   `D`: По дате/времени, от старейшего.
    *   `G`: Сначала группирует каталоги.
    *   `-`: Префикс для изменения порядка сортировки на обратный.
*   `/W`: Использует широкий формат списка.
*   `/?`: Отображает справку по команде.

**Примеры**:
*   `dir`: Выводит список файлов и каталогов в текущем каталоге.
*   `dir /S`: Выводит список всех файлов и подкаталогов в текущем каталоге и его подкаталогах.
*   `dir *.txt`: Выводит список всех файлов с расширением `.txt` в текущем каталоге.
*   `dir /A:H`: Выводит список скрытых файлов.
*   `dir /S /B *.log > logs.txt`: Находит все файлы `.log` в текущем каталоге и подкаталогах, выводит их в простом формате и перенаправляет вывод в `logs.txt`.

**Условия успешного выполнения**:
*   Команда выполняется и отображает запрошенный список каталогов.
*   Сообщения об ошибках не отображаются.
*   Команда обычно возвращает код выхода `0`.

**Условия неудачи**:
*   "File Not Found" (Файл не найден): Если указанный путь или шаблон имени файла не существует.
*   "Access is denied." (Отказано в доступе.): Если у вас нет необходимых разрешений для доступа к каталогу.
*   Если вывод перенаправляется в файл, а каталог для выходного файла не существует, это может привести к ошибке "File creation error." (Ошибка создания файла).

#### 2. `copy` - Копирование одного или нескольких файлов

Команда `copy` дублирует один или несколько файлов из одного места в другое.

```cmd
copy [/D] [/V] [/N] [/Y | /-Y] [/Z] [/L] [/A | /B] источник [/A | /B] [+ источник [/A | /B] [+ ...]] [назначение [/A | /B]] [/?]
```

**Флаги/Параметры**:
*   `источник`: Указывает файл(ы) для копирования. Могут использоваться подстановочные знаки (`*`, `?`).
*   `назначение`: Указывает каталог и/или имя файла для нового(ых) файла(ов).
*   `/V`: Проверяет правильность записи новых файлов.
*   `/Y`: Подавляет запросы подтверждения перезаписи существующего файла назначения.
*   `/-Y`: Принудительно запрашивает подтверждение перезаписи существующего файла назначения.
*   `/A`: Указывает текстовый файл ASCII.
*   `/B`: Указывает двоичный файл.
*   `/Z`: Копирует файлы в режиме с возможностью возобновления, что полезно для больших файлов по сети.
*   `/?`: Отображает справку по команде.

**Примеры**:
*   `copy file.txt C:\backup`: Копирует `file.txt` из текущего каталога в `C:\backup`.
*   `copy *.doc C:\reports /V`: Копирует все файлы `.doc` из текущего каталога в `C:\reports` и проверяет копирование.
*   `copy C:\source\file1.txt + C:\source\file2.txt C:\destination\combined.txt`: Объединяет `file1.txt` и `file2.txt` в `combined.txt`.
*   `copy D:\readme.htm`: Копирует `readme.htm` с диска D: в текущий каталог.

**Условия успешного выполнения**:
*   Файл(ы) копируются в место назначения без сообщений об ошибках.
*   Отображается сообщение типа "1 file(s) copied." (Скопирован 1 файл).
*   `ERRORLEVEL` равен `0`.

**Условия неудачи**:
*   "The system cannot find the file specified." (Система не может найти указанный файл.): Если исходный файл не существует.
*   "Access is denied." (Отказано в доступе.): Если у вас нет разрешений на запись в каталог назначения или разрешений на чтение исходного файла.
*   "There is not enough space on the disk." (Недостаточно места на диске.): Если диск назначения заполнен.
*   Если используется `/V` и проверка не удалась, появится сообщение об ошибке.
*   `ERRORLEVEL` будет ненулевым (например, `1` для общей ошибки).

#### 3. `ping` - Проверка IP-связности

Команда `ping` отправляет сообщения эхо-запроса протокола ICMP (Internet Control Message Protocol) целевому хосту для проверки IP-связности.

```cmd
ping [/t] [/a] [/n количество] [/l размер] [/f] [/i TTL] [/v TOS] [/r количество] [/s количество] [{/j список_хостов | /k список_хостов}] [/w таймаут] [/R] [/S исходный_адрес] [/4] [/6] имя_цели
```

**Флаги/Параметры**:
*   `имя_цели`: Указывает имя хоста или IP-адрес назначения.
*   `/t`: Пингует указанный хост до прерывания (Ctrl+C для остановки, Ctrl+Break для отображения статистики).
*   `/a`: Разрешает адреса в имена хостов.
*   `/n количество`: Указывает количество отправляемых эхо-запросов (по умолчанию 4).
*   `/l размер`: Указывает размер буфера отправки в байтах (по умолчанию 32).
*   `/w таймаут`: Указывает таймаут в миллисекундах для ожидания каждого ответа (по умолчанию 4000 мс).
*   `/?`: Отображает справку по команде.

**Примеры**:
*   `ping google.com`: Пингует `google.com` четыре раза.
*   `ping 192.168.1.1 -n 10`: Пингует IP-адрес `192.168.1.1` десять раз.
*   `ping localhost`: Пингует локальную машину.
*   `ping -t 8.8.8.8`: Непрерывно пингует DNS-сервер Google до ручной остановки.

**Условия успешного выполнения**:
*   "Reply from <IP address>" (Ответ от <IP-адрес>): Указывает на успешный ответ от цели.
*   "TTL=" в выводе.
*   Сводка, показывающая "Packets: Sent = X, Received = X, Lost = 0 (0% loss)" (Пакеты: Отправлено = X, Получено = X, Потеряно = 0 (0% потерь)).
*   Команда возвращает код выхода `0`.

**Условия неудачи**:
*   "Request timed out." (Время ожидания запроса истекло.): Цель не ответила в течение указанного таймаута.
*   "Destination host unreachable." (Конечный хост недоступен.): Не удалось найти маршрут к хосту назначения.
*   "Ping request could not find host <hostname>. Please check the name and try again." (Запрос ping не смог найти хост <имя_хоста>. Проверьте имя и повторите попытку.): Имя хоста не удалось разрешить в IP-адрес (проблема DNS).
*   "General failure." (Общая ошибка.): Указывает на проблему с локальным сетевым интерфейсом.
*   Сводка, показывающая "Packets: Sent = X, Received = Y, Lost = Z (Z% loss)" (Пакеты: Отправлено = X, Получено = Y, Потеряно = Z (Z% потерь)), где Z > 0.
*   Команда возвращает ненулевой код выхода (например, `1`, если хост недоступен).

#### 4. `mkdir` (или `md`) - Создание каталога

Команда `mkdir` создает новый каталог или подкаталог.

```cmd
mkdir [диск:]путь
```

**Флаги/Параметры**:
*   `[диск:]путь`: Указывает диск и путь к создаваемому каталогу.
*   `/?`: Отображает справку по команде.
*   (Примечание: Флаг `-p` для создания родительских каталогов, распространенный в Unix-подобных системах, не является стандартным флагом `cmd`. Расширения команд в Windows позволяют создавать промежуточные каталоги в указанном пути с помощью одной команды `mkdir`, что фактически аналогично `-p` в некоторых случаях).

**Примеры**:
*   `mkdir new_folder`: Создает каталог с именем `new_folder` в текущем каталоге.
*   `mkdir C:\projects\my_project`: Создает `my_project` внутри `C:\projects`. Если `C:\projects` не существует, `cmd` с включенными расширениями команд создаст его.
*   `md "My Documents"`: Создает каталог с именем "My Documents" (кавычки необходимы из-за пробела).

**Условия успешного выполнения**:
*   Каталог создается без каких-либо сообщений об ошибках.
*   При успешном выполнении обычно не выводится никакого вывода.
*   `ERRORLEVEL` равен `0`.

**Условия неудачи**:
*   "A subdirectory or file <directory_name> already exists." (Подкаталог или файл <имя_каталога> уже существует.): Если каталог с таким же именем уже существует в указанном месте.
*   "The system cannot find the path specified." (Система не может найти указанный путь.): Если промежуточный каталог в пути не существует и расширения команд отключены (или если путь недействителен).
*   "Access is denied." (Отказано в доступе.): Если у вас нет разрешений на запись в родительский каталог.
*   `ERRORLEVEL` ненулевой (например, `1`).

#### 5. `del` (или `erase`) - Удаление одного или нескольких файлов

Команда `del` удаляет один или несколько файлов.

```cmd
del [/p] [/f] [/s] [/q] [/a[:атрибуты]] имена
```

**Флаги/Параметры**:
*   `имена`: Указывает список из одного или нескольких файлов для удаления. Могут использоваться подстановочные знаки (`*`, `?`).
*   `/P`: Запрашивает подтверждение перед удалением каждого файла.
*   `/F`: Принудительное удаление файлов только для чтения.
*   `/S`: Удаляет указанные файлы из всех подкаталогов. Отображает имена файлов по мере их удаления.
*   `/Q`: Тихий режим; подавляет запросы на подтверждение удаления.
*   `/A[:атрибуты]`: Удаляет файлы на основе атрибутов.
    *   `R`: Файлы только для чтения
    *   `H`: Скрытые файлы
    *   `S`: Системные файлы
    *   `A`: Файлы, готовые к архивированию
    *   `-`: Префикс, означающий "не"
*   `/?`: Отображает справку по команде.

**Примеры**:
*   `del old_file.txt`: Удаляет `old_file.txt` из текущего каталога.
*   `del *.bak /Q`: Удаляет все файлы с расширением `.bak` в текущем каталоге без запроса.
*   `del /S /Q C:\temp\*.*`: Удаляет все файлы в `C:\temp` и его подкаталогах без запроса.
*   `del /F readonly.txt`: Принудительно удаляет файл только для чтения с именем `readonly.txt`.

**Условия успешного выполнения**:
*   Файл(ы) удаляются без сообщений об ошибках.
*   Если `/P` не используется, при успешном выполнении может не быть вывода, или сообщение типа "Deleted file - <filename>" (Удален файл - <имя_файла>), если используется `/S`.
*   `ERRORLEVEL` равен `0`.

**Условия неудачи**:
*   "Could Not Find <filename>" (Не удалось найти <имя_файла>): Если указанный файл не существует.
*   "Access is denied." (Отказано в доступе.): Если у вас нет необходимых разрешений для удаления файла, или если файл используется другим процессом и `/F` недостаточно.
*   "The process cannot access the file because it is being used by another process." (Процесс не может получить доступ к файлу, так как он используется другим процессом.): Если файл заблокирован другим приложением.
*   `del` удалит файлы внутри каталога, если указано имя каталога, но не удалит сам каталог. Для удаления каталогов используйте `rmdir`.
*   `ERRORLEVEL` ненулевой.

### Дополнительная литература
Для получения более подробной информации обратитесь к официальной документации по `cmd`.

