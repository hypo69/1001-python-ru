### Як перевірити та виправити помилки на жорсткому диску в Windows: шпаргалка по CHKDSK та PowerShell

З часом на жорсткому диску або SSD можуть накопичуватися логічні помилки, з'являтися пошкоджені сектори, що призводить до уповільнення роботи системи, збоїв програм і навіть втрати даних. На щастя, у Windows є вбудовані інструменти для діагностики та виправлення таких проблем.

У цій шпаргалці я покажу два способи контролю станів дисків: утиліту `chkdsk` та команди PowerShell.

### Частина 1: Утиліта CHKDSK

**CHKDSK** (Check Disk) — це стандартна утиліта командного рядка, яка перевіряє файлову систему тому на наявність логічних та фізичних помилок.

#### Як запустити CHKDSK

Для виконання команд, які вносять зміни в систему, вам знадобляться права адміністратора.

1.  Натисніть `Win + S` або кнопку «Пуск».
2.  Введіть `cmd` або «Командний рядок».
3.  У результатах пошуку клацніть правою кнопкою миші по «Командний рядок» та виберіть **«Запустити від імені адміністратора»**.

#### Основні параметри (ключі) CHKDSK

Команда має наступний синтаксис: `chkdsk [диск:] [параметри]`

Часто використовувані параметри:

*   `chkdsk C:`
    Запускає перевірку диска C: у режимі «тільки для читання». Утиліта повідомить про знайдені помилки, але не виправлятиме їх.

*   **/f**
    Виправляє помилки на диску. Якщо на диску є відкриті файли (що майже завжди так для системного диска), утиліта запропонує виконати перевірку при наступному перезавантаженні системи.
    *Приклад:* `chkdsk D: /f`

*   **/r**
    Шукає пошкоджені сектори (bad sectors) та намагається відновити інформацію, яку можна прочитати. Цей ключ **включає в себе функціональність ключа `/f`**, тому використовувати їх разом необов'язково, хоча і не є помилкою. Перевірка з `/r` займає значно більше часу.
    *Приклад:* `chkdsk D: /r`

*   **/x**
    Примусово відключає том перед перевіркою, якщо це необхідно. Усі відкриті дескриптори для цього диска стануть недійсними. Цей ключ також **включає в себе функціональність `/f`**.
    *Приклад:* `chkdsk D: /x`

*   **/b** (тільки для файлової системи NTFS)
    Виконує повторну оцінку пошкоджених кластерів на диску. Цей ключ є найповнішим, оскільки **включає в себе функціональність `/r`**.
    *Приклад:* `chkdsk C: /b`

*   **/scan** (тільки для NTFS)
    Запускає онлайн-перевірку тому. Це означає, що диск не потрібно відключати, і ви можете продовжувати працювати в системі під час сканування. Однак для виправлення знайдених проблем знадобиться наступний ключ або перезавантаження.
    *Приклад:* `chkdsk C: /scan`

*   **/spotfix** (тільки для NTFS)
    Виконує точкове, дуже швидке виправлення помилок на томі. Вимагає відключення диска, як і ключ `/f`.
    *Приклад:* `chkdsk D: /spotfix`

#### Приклади запуску CHKDSK

*   **Швидка перевірка диска D: без виправлення:**
    ```
    chkdsk D:
    ```

*   **Перевірка та виправлення помилок на диску D:**
    ```
    chkdsk D: /f
    ```

*   **Найповніша перевірка системного диска C: з пошуком пошкоджених секторів та їх відновленням:**
    ```
    chkdsk C: /f /r
    ```
    *або просто:*
    ```
    chkdsk C: /r
    ```

#### Що робити, якщо диск використовується?

При спробі запустити перевірку з виправленням (`/f` або `/r`) для системного диска (зазвичай `C:`), ви побачите повідомлення:

`Неможливо виконати команду CHKDSK, оскільки вказаний том використовується іншим процесом. Чи слід виконати перевірку цього тому при наступному перезавантаженні системи? (Y/N)`

Натисніть клавішу `Y`, а потім `Enter`. Перевірка буде запланована та автоматично розпочнеться при наступному перезавантаженні комп'ютера.

---

### Частина 2: Команди PowerShell

PowerShell — це оболонка автоматизації, яка пропонує сучасні та гнучкі команди для керування системою.

#### Як запустити PowerShell

Як і у випадку з командним рядком, вам знадобляться права адміністратора.

1.  Натисніть `Win + S` або кнопку «Пуск».
2.  Введіть `powershell`.
3.  У результатах пошуку клацніть правою кнопкою миші по «Windows PowerShell» та виберіть **«Запустити від імені адміністратора»**.

#### Основна команда: `Repair-Volume`

У PowerShell для перевірки та виправлення дисків використовується командлет `Repair-Volume`.

Спочатку може бути корисно переглянути список усіх томів у системі за допомогою команди:
```powershell
Get-Volume
```

#### Основні параметри `Repair-Volume`

*   `-DriveLetter`
    Вказує букву диска, який потрібно перевірити.

*   `-Scan`
    Сканує том на наявність помилок та повідомляє про них. Це аналог `chkdsk` без ключів.
    *Приклад:* `Repair-Volume -DriveLetter D -Scan`

*   `-SpotFix`
    Виконує швидке онлайн-виправлення без необхідності відключати том надовго. Аналог `chkdsk /spotfix`.
    *Приклад:* `Repair-Volume -DriveLetter D -SpotFix`

*   `-OfflineScanAndFix`
    Виконує повноцінну перевірку та виправлення диска в автономному режимі. Це найповніший аналог команди `chkdsk /f /r`. Система попросить перезавантаження, якщо том використовується.
    *Приклад:* `Repair-Volume -DriveLetter C -OfflineScanAndFix`

#### Приклади PowerShell

*   **Просканувати диск C: на наявність помилок (без виправлення):**
    ```powershell
    Repair-Volume -DriveLetter C -Scan
    ```
    Ви побачите результат у полі `HealthStatus` (наприклад, `Healthy` або `Needs-Repair`).

*   **Виконати швидке виправлення для диска D:**
    ```powershell
    Repair-Volume -DriveLetter D -SpotFix
    ```

*   **Запланувати повну перевірку та виправлення системного диска C: при наступному перезавантаженні:**
    ```powershell
    Repair-Volume -DriveLetter C -OfflineScanAndFix
    ```
    PowerShell, як і `chkdsk`, повідомить вас про необхідність перезавантаження та запланує завдання.


Для більшості користувачів результат роботи `chkdsk C: /r` та `Repair-Volume -DriveLetter C -OfflineScanAndFix` буде однаковим. Вибір залежить від ваших уподобань та завдань.

**Важливе зауваження:** Перед будь-якими серйозними операціями з диском, особливо якщо ви підозрюєте наявність фізичних проблем, **завжди створюйте резервну копію важливих даних!** Інструменти можуть виправити помилки, але не можуть гарантувати 100% збереження інформації на пошкодженому носії.